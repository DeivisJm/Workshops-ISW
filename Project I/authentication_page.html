<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Authentication</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="authentication_page.css">
</head>

<body>

    <div class="container">
        <h2>Ingrese su usuario</h2>
        <form action="#" method="post" onsubmit="return login()">
            <label for="username">Usuario:</label>
            <input type="text" id="username" name="username" placeholder="Ingrese su usuario" required>

            <label for="password">Contraseña:</label>
            <input type="password" id="password" name="password" placeholder="Ingrese su contraseña" required>

            <input type="submit" value="Ingresar">
        </form>
        <p id="message"></p>
        <div id="register-link">
            <p>Si no tienes una cuenta, <a href="registration.html">Registrala aqui</a>.</p>
        </div>
    </div>

    <script>
        var users = JSON.parse(localStorage.getItem('users'));

        function login() {
            var username = document.getElementById("username").value;
            var password = document.getElementById("password").value;

            var isValidUser = false;

            // Verificar si el usuario y la contraseña coinciden con algún usuario registrado
            for (var i = 0; i < users.length; i++) {
                if (users[i].username === username && users[i].password === password) {
                    isValidUser = true;
                    break;
                }
            }

            if (isValidUser) {
                // Autenticación exitosa
                document.getElementById("message").innerHTML = "Bienvenido, " + username + "!";
                window.location.href = "dashboard.html";
                return false; // Evita el envío del formulario
            } else {
                // Autenticación fallida
                document.getElementById("message").innerHTML = "Cuenta no existente";
                return false; // Evita el envío del formulario
            }
        }
    </script>

    </script>


</body>

</html>